# 데이터베이스 정의
> 통합 데이터(Integrated Data)
 - 검색의 효울성을 위해 중복이 최소화된 데이터의 모임
> 저장 데이터(Stored Data)
 - 컴퓨터가 접근 가능한 저장 매체에 저장된 데이터
> 운영 데이터(Operational Data)
 - 존재 가치가 확실하고 반드시 필요한 데이터
> 공유 데이터(Shared Data)
 - 여러 응용 프로그램들이 공동으로 사용하는 데이터

# 데이터베이스의 특징
> 실시간 접근성(Real Time Accessibility)
 - 사용자의 질의(Query)에 대하여 즉시 처리하여 응답하는 특징
> 계속적인 진화(Continuous Evolution)
 - 삽입, 삭제, 갱신을 통하여 항상 최근의 정확한   데이터를 동적으로 유지
> 내용에 의한 참조(Content Reference)
 - 데이터베이스에 있는 데이터를 참조할 때 튜플의 주소나 위치에 의해서가 아니라 사용자가 요구하는 데이터 내용에 따라 참조
> 논리적 독립성 (logical Independence)
 - 응용 프로그램과 데이터베이스를 독립시킴으로써 데이터의 논리적 구조를 변경시키더라도 응용프로그램은 변경되지 않는 특징
> 물리적 독립성 (Phygical Independence)
 - 물리적 장치를 독립시킴으로써, DBMS 성능 향상을 위해 새로운 디스크를 도입하더라도 응용프로그램은 영향을 주지않고 데이터의 물리적 구조만 변경될수 있는 특징

# 데이터 언어
> 데이터 정의어(Data Definition Language)
 - 데이터베이스 구조, 데이터 형식, 접근 방식 등 데이터베이스를 구축하거나 변경할 목적으로 사용하는 언어
 - CREATE , ALTER , DROP
> 데이터 조작어(Data Manipulation Language)
 - 데이터 처리를 위해서 응용프로그램과 데이터베이스 관리 시스템 간의 인터페이스를 위한 언어
 - SELECT INSERT DELETE
> 데이터 제어어(Data Control Language)
 - 보안 및 권한 제어 무결성 회복 병행 제어를 위한 언어
 - GRANT, REVOKE , ROLLBACK , COMMIT

# 데이터베이스 사용자
> 데이터베이스 관리자(DataBase Administrator)
 - DDL 과 DCL을 통해 데이터베이스를 정의하고 제어하는 사람 또는 그룹이다.
 - 상당한 DB 지식보유
> 데이터 관리자(Data Administrator)
 - 조직내에서 데이터를 대한 관리를 총괄 , 정보 활용에 대한 중앙 집중적인 계획 수립 및 통제
> 데이터 설계자(Data Architect)
 - 기업의 업무 수행에 필요한 데이터의 구조를 체계적으로 정의하는 사람
 - 데이터 구조를 정의하기 위해 데이터 구조 전반에 걸쳐 데이터 구조 원칙, 데이터 구조 정보, 데이터 구조 관리 등을 정의
> 응용 프로그래머 (Applicaiton Programmer)
 - 호스트 프로그래밍 언어에 DML을 삽입하여 데이터베이스에 접근하는 사람을 말한다.
 - 호스트 프로그래밍 언어도 알고 DBMS도 어느정도 알고있는 전산 전문가를 의미
> 일반 사용자 (End User)
 - 질의어를 통해 데이터베이스 관리 시스템에 접근하는 사람
 - 지식이 없어두 된다.

# DBMS (데이터베이스 관리 시스템)
> DBMS 개념
 - 사용자와 데이터베이스 사이에서 사용자의 요구에 따라 정보를 생성해 주고 데이터베이스를 관리해 주는 소프트웨어이다.
 - 기존 파일시스템이 갖는 데이터의 종속성과 중복성의 문제를 해결하기 위해 제안된 시스템 모든 응용 프로그램들이 데이터베이스를 공유할 수 있도록 관리

 > DBMS 필수 기능
 >> 정의 기능(Definition Facility)
  > - 데이터의 타입과 구조, 데이터가 데이터베이스에 저장될 때의 계약 조건 등을 명시하는 기능제공
 >> 조작 기능(Manipulation Facility)
  > - 체계적 데이터 처리를 위해 데이터 접근 기능을 명시하는 기능을 제공
 >> 제어 기능(Control Facility)
  > - 데이터의 정확성과 안정성을 유지하기 위해 무결성, 보안 및 권한 검사, 병행 제어등을 명시하는 기능 제공

> DBMS 장 · 단점
 >> 장점
  > - 데이터의 논리적, 물리적 독립성 보장
  > - 데이터를 공동 이용
  > - 데이터 중복 최소화
  > - 무결성 유지
  > - 실시간 처리
  > - 통합 관리
  > - 일관성 유지
  > - 보완 유지
  > - 최신 데이터 유지
 >> 단점
  > - 대용량 디스크로의 집중적인 접근으로 과부화 발생
  > - 전산화 비용이 증가
  > - 데이터의 백업과 회복이 어렵다
  > - 시스템이 복잡해진다

# 스키마
> 스키마의 개념
 > - 스키마는 데이터베이스의 구조와 제약 조건에 관한 전반적인 명세를 의미
 > - 데이터개체(Entity) , 속성(Attribute) , 관계 (Relationship) 및 데이터 조작시 데이터 값들이 갖는 제약 조건 등에 관해 전반적으로 정의
 > - 사용자 관점에 따라 외부 스키마, 개념 스키마, 내부 스키마로 나뉜다.

> 스키마의 특징
 > - 데이터 구조적 특성을 의미
 > - 스키마는 데이터 사전에 저장
 > - 시간에 따라 불변인 특성을 갖춘다.

> 스키마의 3대 계층
>> 외부 스키마
 > - 사용자나 응용 프로그래머가 각 개인의 입장에서 필요로 하는 데이터베이스의 논리적 구조를 정의한 것이다.
>> 개념 스키마
 > - 개체 간의 관계와 제약 조건을 나타내고 데이터베이스의 접근 권한, 보안 정책 및 무결성 규정에 관한 명세를 정의한 것이다.
>> 내부 스키마
 > - 데이터베이스의 물리적 구조를 정의한 것이다.

# 데이터베이스 구조
> 요구사항 분석
 - 요구 조건 명세서 작성
> 개념적 설계
 - 개념 스키마, 트랜잭션 모델링, E-R 모델
> 논리적 설계
 - 논리 스키마 설계, 트랜잭션 인터페이스 설계
> 물리적 설계
 - 물리적 구조의 데이터의 반환
> 데이터베이스 구현
 - DDL로 데이터베이스 생성, 트랜잭션 작성

# ER모델
> ER모델 정의
- 개념적 데이터 모델의 가장 대표적인것으로, 1976년 피터 첸에 의해 제안되었다.
- ER모델은 개체, 속성, 관계 등에 대하여 용이하게 표현할 수 있는 ER 도형(ERD)을 정의하고 있다.

> 개체 및 개체 타입
- 개체는 현실 세계의 객체로서 유형 또는 무형의 정보 대상으로 존재하며 서로 구별될 수 있는 것을 뜻하고 개체의 특성을 나타내는 속성을 갖는다.
- 하나의 개체를 개체 어커런스 또는 개체 인스턴스 라 하고, 개체 어커런스들의 집합에 대한 공통의 특성들을 갖는 개체클래스를 개체 타입이라 한다.
> 관계 및 관계 타입
- 관계는 2개 이상의 개체 사이에 존재하는 연광성을 뜻하며, 관계 타입은 같은 관계들의 집합 또는 틀을 뜻한다.
- 관계는 관계에 참여하는 개체 탕비의 개수에 대한 차수와 관계에 참여하는 개체 어커런스의 개수에 대한 대응 카디널리티를 갖는다.

# 릴레이션
> 릴레이션 스키마
- 릴레이션에 데이터를 넣을수 있도록 하는 릴레이션 틀
- 릴레이션 스킴 또는 릴레이션 내포 라고도함
> 릴레이션 인스턴스
- 어느 시점의 릴레이션에 들어있는 튜플들의 집합
- 릴레이션 또는 릴레이션 외포라고도함
- 속성(애트리뷰트)의 수는 차수
- 행(튜플) 의 수는 카디널리티
- 릴레이션에서 하나의 애트리뷰트가 취할 수 있는 같은 타입의 원자(Atomic)값들의 집합을 도메인이라 한다.

# 키의 개념 및 종류
> 슈퍼키(Super Key)
- 한 릴레이션 내에 있는 속성들의 집합으로 구성된 키
- 릴레이션을 구성하는 모든 튜플에 대해 유일성(unique)은 만족하지만, 최소성(Minimality)은 만족하지 못한다.
> 후보키(Candidate Key)
- 릴레이션을 구성하는 속성들 중에서 튜플을 유일하게 식별하기 위해 사용되는 속성들의 부분집합이다.
- 최소성과 유일성 모두 만족한다.
> 기본키(Primary Key)
- 후보키 중에서 특별히 선정된 키로 중복된 값을 가질 수 없다.
- null 값을 가질수 없고, 유일성과 최소성을 가진다.
> 대체키(Alternate Key)
- 후보키 중에서 선정된 기본키를 제외한 나머지 후보키를 의마한다.
> 외래키(Foreign Key)
- 다른 릴레이션의 기본키를 참조하는 속성 또는 속성들의 집합을 의미한다.
- 외래키는 릴레이션 간의 관계를 표현할 때 사용한다.

# 무결성(Integerity)
> 무결성의 개념
- 데이터베이스에 저장된 데이터 값과 그것이 표현하는 현실 세계의 실제 값이 일치하는 정확성을 의미

> 무결성의 종류
>> 개체 무결성
 > - 기본 릴레이션의 기본키를 구성하는 어떤 속성도 NULL 일 수 없다는 규정
>> 참조 무결성
 > - 외래키 값은 NULL 이거나 참조릴레이션의 기본키값과 동일해야 한다는 규정
>> 관계 무결성
 > - 릴레이션에 어느 한 튜플의 삽입 가능 여부 또는 한 릴레이션과 다른 릴레이션의 튜플들 사이의 관계에 대한 적절성 여부를 지정한 규정
>> 도메인 무결성
 > - 특정 속성의 값이 그 속성이 정의된 도메인에 속한 값이어야 한다는 규정
>> NULL 무결성
 > - 릴레이션의 특정 속성 값이 NULL이 될 수 없다는 규정

# 관계대수
> 관계대수의 개념
- 관계형 데이터베이스에서 원하는 정보와 그 정보를 어덯게 유도하는가를 기술하는 절차적 언어이다.
- 관계대수는 하나 또는 두 개의 릴레이션을 입력으로 받아들여 결과로서 새로운 릴레이션을 생성해내는 연산들의 집합이다.
- 기본 연산으로 SELECT, PROJECT, JOIN, DIVISION 등이있다.
> 순수 관계 연산자
>> SELECT
 > - 릴레이션(R)에 존재하는 튜플들 중에서 특정 조건을 만족하는 튜플들을 부분집합을 구하여 새로운 릴레이션을 만든다.
 > - 수행연산이다.
 > - " σ(조건)(R) "



>> PROJECT
 > - 주어진 릴레이션(R)에서 속성 리스트에 제시된 속성 값만을 추출하여 새로운 릴레이션을 만든다.
 > - 수직연산이다.
 > - " π(속성 리스트)(R) "

>> JOIN
 > - 공통 속성을 중심으로 2개의 릴레이션(R1,R2)을 하나로 합쳐서 새로운 릴레이션을 생성한다.
 > - CARTESIAN PRODUCT 연산을 수행한 다음 SELECT 연산을 수행한 것과 같다.
 > - R1 ▷◁ (join 조건) R2
 > - θ : 세타조인이라 한다.

>> DIVISION
 > - 두 릴레이션에 대한 모든 튜플이 연관되어 있는 튜플을 선택하는 것이다.
 > - R1(속성r1 ÷ 속성r2)R2

> 관계해석
> - 원하는 정보가 무엇이라는 것만 정의하는 비절차적 특성을 지닌다.
> - 튜플 관계해석과 도메인 관계해석이 있다.

# DDL(Data Definition Language)
> DDL의 개념
- DDL에 정의된 내용은 메타데이터가 되며, 시스템 카탈로그에 저장된다.
- CREATE : 스키마 , 도메인 , 테이블 , 뷰 , 인덱스를 정의한다.
- ALTER : 테이블에 대한 정의를 변경한다.
- DROP : 스키마, 도메인, 테이블, 뷰, 트리거, 인덱스를 제거한다.

> CREATE SCHEMA
- 스키마를 정의하는 명령문
- ex) ID가 홍길동인 사용자의 스키마 '대학교'를 정의하는 SQL 문은 다음과 같다.
  ```
  CREATE SCHEMA 대학교 AUTHORIZATION 홍길동;
  ```

> CREATE DOMAIN
- 도메인을 정의하는 명령문
- 하나의 속성이 취할 수 있는 동일한 타입의 원자값들의 집합이다.
- ex) 성별이 '남' 또는 '여'와 같은 정해진 1개의 문자로 표현되는 도메인 SEX를 정의하는 SQL문은
  ```
  CREATE DOMAIN SEX CHAR(1)
  DEFAULT '남'
  CONSTRAINT VALID-SEX CHECK (VALUE IN('남', '여'));

  CREATE DOMAIN 도메인명 데이터타입
  DEFALUT 기본값
  CONSTRAINT 제약조건명 CHECK (범위값);
  ```

 > CREATE TABLE
 ```
 CREATE TABLE 테이블명
  속성명 데이터타입 [NOT NULL],
  PRIMARY KEY (기본키_속성명)
  FOREIGN KEY(외래키_속성명)
    REFERENCES 참조테이블(기본키_속성명)
 ```

> CREATE VIEW
- 뷰는 하나 이상의 기본 테이블로부터 유도되는 이름을 갖는 가상 테이블로, CREATE VIEW는 뷰는 정의하는 명렁문이다.
  ```
  CREATE VIEW 뷰명(속성명)
  AS SELECT문(
    FROM ...
    WHERE ...
  )
  ```
> CREATE INDEX
- 검색을 빠르게 하기 위해 만든 보조적인 데이터 구조이며, CREATE INDEX는 인덱스를 정의하는 명령문이다.
  ```
  CREATE [UNIQUE] INDEX(인덱스명)
    ON 테이블명(속성명[ASC | DESC])
  * UNIQUE를 사용할 경우 중복 값이 없는 속성으로 인덱스를 생성한다.
    생략된 경우 중복 값을 허용

  ```
> 트리거
- 데이터베이스 시스템에서 데이터의 입력, 갱신, 삭제 등의 이벤트가 발생할 떄 마다 자동적으로 수행되는 사용자 정의 프로시저다.

> ALTER TABLE
```
ALTER TABLE 테이블명 ADD 속성명 데이터타입 DEFAULT 기본값
ALTER TABLE 테이블명 ALTER 속성명 SET DEFAULT 기본값
ALTER TABLE 테이블명 DROP COLUMN 속성명
```

# JOIN
> INNER JOIN
- 동일한 속성이 두 번 나타나게 되는데 이중 중복된 속성을 제겅하여 같은 속성을 한 번만 표기하는 방법이다.
> OUTER JOIN
- 릴레이션에서 JOIN 조건에 만족하지 않는 튜플도 결과로 출력하기 위한 방법이다.
> SELF JOIN
- 같은 테이블에서 2개의 속성을 연결하여 EQUI JOIN 을 하는 방법이다.

# DML
> INSERT
```
INSERT INTO 테이블명[속성명] VALUES (데이터)
```
> DELETE
```
DELETE FROM 테이블명 WHERE 조건
```
> UPDATE
```
UPDATE 테이블명
SET 속성명=데이터[속성명=데이터]
WHERE 조건
```

# DCL
> COMMIT
- 데이터베이스 조작 작업을 영구적으로 반영하여 완료한다.
> ROLLBACK
- 데이터베이스 조작 작업이 비정상적으로 종료 되었을 때 원래의 상태로 복구한다.
> GRANT
- 데이터베이스 사용자에게 사용 권한 부여
  ```
  GRANT RESOURCE TO 사용자_ID
  RESOURCE : 데이터베이스 및 테이블 생성 가능자
  DBA : 데이터베이스 관리자
  CONNECT : 단순 사용자
  ```
> REVOKE
- 데이터베이스 사용자의 사용 권한 취소
  ```
  REVOKE [GRANT OPTION FOR] 권한_리스트 ON 개체 FROM 사용자 [CASCADE]
  GRANT OPTION FOR : 다른 사용자에게 권한을 부여할 수 있는 권한을 취소한다.
  CASCADE : 권한 취소 시 권한을 부여받았던 사용자가 다른 사용자에게 부여한 권한도 연쇄적으로 취소한다.
  ```


# View
> 뷰의 개념
- 뷰는 하나 이상의 기본 테이블에서 유도되는 가상 테이블이다.
- 뷰를 생성하면 뷰 정의가 시스템 내에 저장되었다가 생성된 뷰 이름을 질의어에서 사용할 경우 질의어가 실행될 때 뷰에 정의된 기본테이블로 대체되어 기본 테이블에 대해 실행된다.
> 뷰의 특징
- 기본 테이블에서 유도된 테이블이기 떄문에 기본 테이블과 같은 형태의 구조를 가지며, 조작도 기본 테이블을 사용하는 것과 유사하다.
- 뷰는 가상 테이블이기 때문에 물리적으로 구현되어 있지 않다.
> 뷰의 제약성
- 뷰의 열이 테이블의 열이 아닌 상수, 계산식, 그룹 함수를 사용해 만들어 졌다면 그 뷰는 변경할 수 없다.


# 트랜지션
1. db를 사용할때 중요한것 중에 트랜지션이 중요하다 생각한다. 이는 어디서 이용하는것이냐면 예를들어 카드를 이용해 영화 매표를 한다면 그에따른 마일리지 적립은 한다 치자. 영화 매표에 성공하고 마일리지 적립에 실패하게 된다면 이것을 rollback처리를 해야한다. 즉, 2가지중에 1가지라도 실패하게 된다면 이전작업이 성공한것을 모두 리셋 시킨다.
이것처럼 트랜지션은 아주 중요하다.

현재 만들어본 프로젝트에서는 sqlSession 을이용하여 rollback, commit 작업을 한다.
jdbctemplete 에선 transactionManager를 이용할수 있지만 아직 활용해보지는 않았다.

2. 트랜지션 전파
https://springsource.tistory.com/136 여기가 정리가 잘된것 같다.
